{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 284d88725afac6296215","webpack:///./src/use.js","webpack:///./src/component.js"],"names":["Cat","node","name","props","cats","Array","from","document","getElementsByClassName","catClasses","map","cat","window","forEach","querySelector","addEventListener","evt","srcElement","style","color","parentNode","getAttribute","Ticker","tick","bind","setInterval","Number","ticks","value","update","tickerElement","getElementById","ticker","storedComponents","changeEvent","Event","Component","currentComponents","Object","keys","id","length","reduce","propList","prop","dependents","querySelectorAll","includes","requestAnimationFrame","setAttribute","dependent","textContent","dispatchEvent","component"],"mappings":"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","file":"componentizer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"componentizer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"componentizer\"] = factory();\n\telse\n\t\troot[\"componentizer\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 284d88725afac6296215","import Component from './component';\n\nclass Cat extends Component {\n  constructor(node, name, props) {\n    super(node, name, props);\n  }\n}\n\nconst cats = Array.from(document.getElementsByClassName('cat'));\n\nconst catClasses = cats.map((cat) => new Cat(cat, 'cat', ['age', 'color']));\nwindow.catClasses = catClasses;\n\ncats.forEach((cat) => {\n  cat.querySelector('cat-color').addEventListener('changed', function(evt) {\n    evt.srcElement.style.color = this.parentNode.getAttribute('data-prop-color');\n  });\n});\n\nclass Ticker extends Component {\n  constructor(node, name, props) {\n    super(node, name, props);\n    this.tick = this.tick.bind(this);\n    setInterval(this.tick, 1000);\n  }\n\n  tick() {\n    const tick = Number(this.props.ticks.value)\n    this.update('ticks', tick + 1);\n  }\n}\n\n\nconst tickerElement = document.getElementById('ticker');\n\nconst ticker = new Ticker(tickerElement, 'ticker', ['ticks']);\n\n\n\n// WEBPACK FOOTER //\n// ./src/use.js","const storedComponents = {};\nconst changeEvent = new Event('changed');\n\nclass Component {\n  constructor(node, name, props) {\n    const currentComponents = Object.keys(storedComponents);\n    this.node = node;\n    this.name = name;\n    this.props = {};\n    this.id = currentComponents.length;\n\n    if (props) {\n      this.props = props.reduce((propList, prop) => {\n        propList[prop] = {\n          value: node.getAttribute(`data-prop-${prop}`),\n          dependents: Array.from(node.querySelectorAll(`${this.name}-${prop}`)),\n        };\n\n        return propList;\n      }, {});\n\n      Object.keys(this.props).forEach((prop) => this.update(prop, this.props[prop].value));\n    }\n\n    if (currentComponents.includes(name)) {\n      const length = Object.keys(storedComponents[name]).length;\n      storedComponents[name][length] = this;\n      return;\n    }\n\n    storedComponents[name] = {\n      0: this,\n    };\n  }\n\n  update(prop, value) {\n    if (!value) {\n      return [];\n    }\n\n    this.props[prop].value = value;\n    window.requestAnimationFrame(() => {\n      this.node.setAttribute(`data-prop-${prop}`, value);\n      this.props[prop].dependents.forEach((dependent) => {\n        dependent.textContent = value;\n        dependent.dispatchEvent(changeEvent);\n      });\n    });\n\n    return this.props[prop].dependents;\n  }\n\n  static destroy(component) {\n    const {name, id} = component;\n    storedComponents[name][id] = null;\n    delete storedComponents[name][id];\n  }\n\n  static stored() {\n    return storedComponents;\n  }\n}\n\nexport default Component;\n\n\n\n// WEBPACK FOOTER //\n// ./src/component.js"],"sourceRoot":""}