{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 1ac6d80d9a20d6679af2","webpack:///./src/use.js","webpack:///./src/component.js"],"names":["window","Component","Cat","node","name","props","cats","Array","from","document","getElementsByClassName","catClasses","map","cat","forEach","querySelector","addEventListener","evt","srcElement","style","color","parentNode","getAttribute","Ticker","tick","bind","setInterval","Number","ticks","value","update","tickerElement","getElementById","ticker","storedComponents","changeEvent","Event","currentComponents","Object","keys","id","length","reduce","propList","prop","dependents","querySelectorAll","includes","requestAnimationFrame","setAttribute","dependent","textContent","dispatchEvent","component"],"mappings":"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","file":"componentizer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"componentizer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"componentizer\"] = factory();\n\telse\n\t\troot[\"componentizer\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1ac6d80d9a20d6679af2","import Component from './component';\n\nwindow.Component = Component;\n\nclass Cat extends Component {\n  constructor(node, name, props) {\n    super(node, name, props);\n  }\n}\n\nconst cats = Array.from(document.getElementsByClassName('cat'));\n\nconst catClasses = cats.map((cat) => new Cat(cat, 'cat', ['age', 'color']));\nwindow.catClasses = catClasses;\n\ncats.forEach((cat) => {\n  cat.querySelector('cat-color').addEventListener('changed', function(evt) {\n    evt.srcElement.style.color = this.parentNode.getAttribute('data-prop-color');\n  });\n});\n\nclass Ticker extends Component {\n  constructor(node, props) {\n    super(node, 'ticker', props);\n    this.tick = this.tick.bind(this);\n    setInterval(this.tick, 1000);\n  }\n\n  tick() {\n    const tick = Number(this.props.ticks.value) + 1;\n    this.update('ticks', tick);\n  }\n}\n\n\nconst tickerElement = document.getElementById('ticker');\n\nconst ticker = new Ticker(tickerElement, ['ticks']);\n\n\n\n// WEBPACK FOOTER //\n// ./src/use.js","const storedComponents = {};\nconst changeEvent = new Event('changed');\n\nclass Component {\n  constructor(node, name, props) {\n    const currentComponents = Object.keys(storedComponents);\n    this.node = node;\n    this.name = name;\n    this.props = {};\n    this.id = currentComponents.length;\n\n    if (props) {\n      this.props = props.reduce((propList, prop) => {\n        propList[prop] = {\n          value: node.getAttribute(`data-prop-${prop}`),\n          dependents: Array.from(node.querySelectorAll(`${this.name}-${prop}`)),\n        };\n\n        return propList;\n      }, {});\n\n      Object.keys(this.props).forEach((prop) => this.update(prop, this.props[prop].value));\n    }\n\n    if (currentComponents.includes(name)) {\n      const length = Object.keys(storedComponents[name]).length;\n      storedComponents[name][length] = this;\n      return;\n    }\n\n    storedComponents[name] = {\n      0: this,\n    };\n  }\n\n  update(prop, value) {\n    if (!value) {\n      return [];\n    }\n\n    this.props[prop].value = value;\n    window.requestAnimationFrame(() => {\n      this.node.setAttribute(`data-prop-${prop}`, value);\n      this.props[prop].dependents.forEach((dependent) => {\n        dependent.textContent = value;\n        dependent.dispatchEvent(changeEvent);\n      });\n    });\n    this.node.dispatchEvent(changeEvent);\n    return this.props[prop].dependents;\n  }\n\n  static destroy(component) {\n    const {name, id} = component;\n    storedComponents[name][id] = null;\n    delete storedComponents[name][id];\n  }\n\n  static stored() {\n    return storedComponents;\n  }\n}\n\nexport default Component;\n\n\n\n// WEBPACK FOOTER //\n// ./src/component.js"],"sourceRoot":""}